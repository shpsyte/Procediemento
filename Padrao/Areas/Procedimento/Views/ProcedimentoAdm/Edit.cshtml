@model ProcedimentoAdm

<div class="container">
    <hr />

    @using (Html.BeginForm())
    {
        @Html.HiddenFor(model => model.CD_PROCEDIMENTO)
        @Html.HiddenFor(model => model.CD_CADASTRO)
        @Html.HiddenFor(model => model.CD_ANEXO)
        @Html.HiddenFor(model => model.CD_REGIONAL)
        @Html.HiddenFor(model => model.CD_TIPO)
        @Html.HiddenFor(model => model.CD_USUARIO)
        @Html.HiddenFor(model => model.DTA_ABERTURA)
        @Html.HiddenFor(model => model.DTA_FECHAMENTO)
        @Html.HiddenFor(model => model.DTA_NF_FOX)
        @Html.HiddenFor(model => model.NF_CLIENTE)
        @Html.HiddenFor(model => model.NF_FOX)
        @Html.HiddenFor(model => model.OBS)
        @Html.HiddenFor(model => model.CD_TRANSPORTADOR)
        @Html.HiddenFor(model => model.MOTIVOID)
        



        @Html.Partial("_Validation", ViewData.ModelState)





        <div class="panel-group" id="accordion">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a class="btn btn-default" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">Procedimento
                        </a>
                    </h4>
                </div>
                <div id="collapseThree" class="panel-collapse collapse">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-md-2">
                                    @Html.LabelFor(f => f.CD_PROCEDIMENTO)


                                    @Html.TextBoxFor(model => model.CD_PROCEDIMENTO, new { @class = "form-control", disabled = "disabled" })

                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-2">
                                    @Html.LabelFor(f => f.CD_CADASTRO)

                                    <div class="input-group">
                                        @Html.TextBoxFor(model => model.CD_CADASTRO, new { @class = "form-control", disabled = "disabled" })
                                    </div>
                                </div>

                                <div class="col-md-5">
                                    <label for="cd_cadastro_desc">Razão Social</label>
                                    @Html.TextBoxFor(model => model.Clientes.RAZAO, new { @class = "form-control", disabled = "disabled" })
                                </div>

                                <div class="col-md-3">
                                    <label for="des_cidade">Cidade</label>
                                    @Html.TextBoxFor(model => model.Clientes.DES_CIDADE, new { @class = "form-control", disabled = "disabled" })
                                </div>
                                <div class="col-md-2">
                                    <label for="CD_ESTADO">UF</label>
                                    @Html.TextBoxFor(model => model.Clientes.CD_ESTADO, new { @class = "form-control", disabled = "disabled" })
                                </div>
                            </div>


                            <div class="form-group">

                                <div class="col-md-2">
                                    <label for="CD_REGIONAL">Regional</label>
                                    @Html.TextBoxFor(model => model.Clientes.CD_REGIONAL, new { @class = "form-control", disabled = "disabled" })
                                </div>

                                <div class="col-md-6">
                                    <label for="RAZAO_REPRES">Representante</label>
                                    @Html.TextBoxFor(model => model.Clientes.RAZAO_REPRES, new { @class = "form-control", disabled = "disabled" })
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-md-2">
                                    @Html.LabelFor(f => f.tp_procedimento.CD_TIPO)

                                    <div class="input-group">
                                        @Html.TextBoxFor(model => model.CD_TIPO, new { @class = "form-control", disabled = "disabled" })
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <label for="cd_tipo_desc">Tipo do Procedimento</label>
                                    @Html.TextBoxFor(model => model.tp_procedimento.DES_TIPO, new { @class = "form-control", disabled = "disabled" })
                                </div>
                            </div>




                            <div class="form-group">
                                <div class="col-md-2">
                                    @Html.LabelFor(f => f.NF_FOX)

                                    <div class="input-group">
                                        @Html.TextBoxFor(model => model.NF_FOX, new { @class = "form-control", disabled = "disabled" })
                                    </div>
                                </div>

                                <div class="col-md-2">
                                    <label for="cd_nf_desc">Emissão</label>
                                    @Html.TextBoxFor(model => model.DTA_NF_FOX, new { @class = "form-control", disabled = "disabled" })
                                </div>

                            </div>
                            <div class="form-group">
                                <div class="col-md-2">
                                    @Html.LabelFor(f => f.CD_TRANSPORTADOR)
                                    @Html.TextBoxFor(model => model.CD_TRANSPORTADOR, new { @class = "form-control", disabled = "disabled" })
                                </div>

                                <div class="col-md-5">
                                    @Html.LabelFor(f => f.TRANSPORTADOR.RAZAO)
                                    @Html.TextBoxFor(model => model.TRANSPORTADOR.RAZAO, new { @class = "form-control", disabled = "disabled" })
                                </div>



                            </div>

                            <div class="form-group">
                                <div class="col-md-4">
                                    @Html.LabelFor(model => model.NF_CLIENTE)
                                    @Html.TextBoxFor(model => model.NF_CLIENTE, new { @class = "form-control", disabled = "disabled" })

                                </div>
                            </div>



                            <div class="row">
                                <div class="col-md-4">
                                    <div class="display-field">
                                        @Html.LabelFor(model => model.VL_TRANSPORTADORA)
                                        @Html.TextBoxFor(model => model.VL_TRANSPORTADORA, new { @class = "form-control", disabled = "disabled", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    @Html.LabelFor(model => model.VL_REPRESENTANTE)
                                    @Html.TextBoxFor(model => model.VL_REPRESENTANTE, new { @class = "form-control", disabled = "disabled", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-4">
                                    <div class="display-field">
                                        @Html.LabelFor(model => model.VL_FOXLUX)
                                        @Html.TextBoxFor(model => model.VL_FOXLUX, new { @class = "form-control", disabled = "disabled", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    @Html.LabelFor(model => model.VL_CLIENTE)
                                    @Html.TextBoxFor(model => model.VL_CLIENTE, new { @class = "form-control", disabled = "disabled", @style = "border-color: #2e41dd; color: #2e41dd; font-weight: bold;" })
                                </div>
                            </div>

                            <div class="row">

                                <div class="col-md-4">
                                    <div class="display-field">
                                        @Html.LabelFor(model => model.VL_DCLIENTE)
                                        @Html.TextBoxFor(model => model.VL_DCLIENTE, new { @class = "form-control", disabled = "disabled", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                    </div>
                                </div>
                            </div>



                            <div class="form-group">
                                <div class="col-md-8">
                                    @Html.LabelFor(model => model.OBS)
                                    @Html.TextAreaFor(model => model.OBS, new { @class = "form-control", disabled = "disabled", @rows = "5" })
                                    @Html.ValidationMessageFor(model => model.OBS)
                                </div>
                            </div>





                        </div>
                    </div>
                </div>

            </div>
        </div>
        <hr />
        <div class="panel panel-success">
            <div class="panel-body">
                <div class="form-horizontal">



                    <div class="row">

                        <div class="col-md-4">
                            <label for="CD_DEPARTAMENTO">ENVIAR PARA:</label>
                            <br />
                            @Html.DropDownList("CD_DEPARTAMENTO")
                            @Html.ValidationMessageFor(model => model.CD_DEPARTAMENTO)
                        </div>

                        <div class="col-md-4">
                            <label for="ID_SITUACAO">MUDAR A SITUAÇÃO:</label>
                            <br />
                            @Html.DropDownList("ID_SITUACAO")
                            @Html.ValidationMessageFor(model => model.ID_SITUACAO)
                        </div>


                    </div>

                    <div class="form-group">
                        <div class="col-md-8">
                            @Html.LabelFor(model => model.OBS)
                            <textarea class="form-control" data-val="true" data-val-required="Este Campo é Obrigatório" rows="5" id="ObsAtendimentoNovo" name="ObsAtendimentoNovo"></textarea>
                            <span class="field-validation-valid" data-valmsg-for="ObsAtendimentoNovo" data-valmsg-replace="true"></span>
                        </div>
                    </div>




                </div>
            </div>
            <div class="panel-footer">
                <div class="btn-group">


                    <button class="btn btn-success" data-toggle="modal" data-target="#modal_confirm"><i class="fa fa-save"></i>&nbsp;@Html.T("btbsalvar").ToString()</button>

                    <div class="modal fade bs-modal-sm" id="modal_confirm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="myModalLabel">Você conferiu estes valores?</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="form-horizontal">

                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="display-field">
                                                    @Html.LabelFor(model => model.VL_TRANSPORTADORA)
                                                    @Html.TextBoxFor(model => model.VL_TRANSPORTADORA, new {@onkeypress="return BloqueiaLetras(event)",  @class = "form-control", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                                    @Html.ValidationMessageFor(model => model.VL_TRANSPORTADORA)
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                @Html.LabelFor(model => model.VL_REPRESENTANTE)
                                                @Html.TextBoxFor(model => model.VL_REPRESENTANTE, new {@onkeypress="return BloqueiaLetras(event)",  @class = "form-control", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                                @Html.ValidationMessageFor(model => model.VL_REPRESENTANTE)
                                            </div>
                                        </div>


                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="display-field">
                                                    @Html.LabelFor(model => model.VL_FOXLUX)
                                                    @Html.TextBoxFor(model => model.VL_FOXLUX, new {@onkeypress="return BloqueiaLetras(event)",  @class = "form-control", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                                    @Html.ValidationMessageFor(model => model.VL_FOXLUX)
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="display-field">
                                                    Débito Foxlux
                                                    @Html.DropDownListFor(p => p.CD_DEPARTAMENTO_DEBITO, ViewBag.CD_DEPARTAMENTO_DEBITO as IEnumerable<SelectListItem>, null, new { @style = "border-color: #f00; color: #f00; font-weight: bold;"  }) <i></i>
                                                </div>
                                            </div>
                                            
                                        </div>
                                        <div class="row">

                                            <div class="col-md-4">
                                                <div class="display-field">
                                                    @Html.LabelFor(model => model.VL_DCLIENTE)
                                                    @Html.TextBoxFor(model => model.VL_DCLIENTE, new {@onkeypress="return BloqueiaLetras(event)",  @class = "form-control", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                                    @Html.ValidationMessageFor(model => model.VL_DCLIENTE)
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                @Html.LabelFor(model => model.VL_CLIENTE)
                                                @Html.TextBoxFor(model => model.VL_CLIENTE, new { @onkeypress = "return BloqueiaLetras(event)", @class = "form-control", @style = "border-color: #2e41dd; color: #2e41dd; font-weight: bold;" })
                                                @Html.ValidationMessageFor(model => model.VL_CLIENTE)
                                            </div>

                                        </div>




                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-success"><i class="fa fa-save"></i>&nbsp;Sim, Eu Conferi</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <a class="btn btn-default" id="btbAbreJanela"><i class="fa fa-hdd-o"></i>&nbsp;Documentos</a>
                    <a class="btn btn-default" id="btbAbreInteracoes"><i class="fa fa-users"></i>&nbsp;Interações</a>

                </div>
            </div>

        </div>
           

        
         
    }
</div>



<script>
    $(document).ready(function () {
        $("#btbAbreJanela")
            .bind("click", function () {
                $("#wnddocShow").data("kendoWindow").center().open();
            });
    });

    $(document).ready(function () {
        $("#btbAbreInteracoes")
            .bind("click", function () {
                $("#wndIntShow").data("kendoWindow").center().open();
            });
    });


</script>

@(Html.Kendo().Window()
    .Name("wndIntShow")
    .Title("Interações")
    .Content("Carregando...")
    .Actions(actions => actions.Refresh().Close())
    .LoadContentFrom("Interacoes", "ProcedimentoAdm", new { cd_procedimento = @Model.CD_PROCEDIMENTO })
    //.Width(1024)
        //.Height(480)
    .Modal(true)
    .Visible(false)
    .Scrollable(true)
    .Resizable()
    .Draggable(true)


    )



@(Html.Kendo().Window()
        .Name("wnddocShow")
        .Title("Documentos Referenciados")
        .Content("Carregando...")
        .Actions(actions => actions.Refresh().Close())
        .LoadContentFrom("PesquisarDocumentos", "ProcedimentoAdm", new { cd_procedimento = @Model.CD_PROCEDIMENTO })
        .Width(680)
        .Height(480)
        .Modal(true)
        .Visible(false)
        .Scrollable(true)
        .Resizable()
        .Draggable(true)


        )



<script>

    $(document).ready(function () {

        $('#frmEditProc').validate(
        {
            rules: {
                ObsAtendimentoNovo: {
                    minlength: 2,
                    required: true

                }
            },
            highlight: function (label) {
                $(ObsAtendimentoNovo).closest('.control-group').addClass('error');

            },
            success: function (label) {
                ObsAtendimentoNovo

                  .closest('.control-group').addClass('success');
            }
        });
    }); // end document.ready

</script>


