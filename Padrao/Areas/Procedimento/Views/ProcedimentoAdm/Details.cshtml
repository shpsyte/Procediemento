@{ string _status = "";
    string _OBS = ViewData["ObsFinal"].ToString();
    string _usuario_aprovado = ViewData["UsuarioAprovou"].ToString();

}
@model ProcedimentoAdm

<div class="container">
    <hr />

    <div class="panel-group" id="accordion">
        <div class="panel panel-success">
            <div class="panel-heading">
                <div class="panel-title">
                    @{ string url = string.Format("http://sac.grupofoxlux.com.br/Sac/Details/{0}", ViewBag.cod_gerado); }
                    @{ string url2 = string.Format("http://sac.grupofoxlux.com.br/Garantias/Details/{0}", ViewBag.cod_gerado_vinculado); }
                    <a class="btn btn-default" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">Recolher Cabeçalho</a>

                    @if (ViewBag.cod_gerado > 0)
                    {
                        <a class="btn btn-success" target="_blank" href="@url">Ver o SAC vinculado </a>
                    }

                    @if (ViewBag.cod_gerado_vinculado > 0)
                    {
                        <a class="btn btn-info" target="_blank" href="@url2">Ver a Garantia vinculada </a>
                    }




                </div>
            </div>
            <div id="collapseThree" class="panel-collapse collapse in">
                <div class="panel-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div class="col-md-2">
                                @Html.LabelFor(f => f.CD_PROCEDIMENTO)


                                @Html.TextBoxFor(model => model.CD_PROCEDIMENTO, new { @class = "form-control", disabled = "disabled" })

                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-2">
                                @Html.LabelFor(f => f.CD_CADASTRO)


                                @Html.TextBoxFor(model => model.CD_CADASTRO, new { @class = "form-control", disabled = "disabled" })

                            </div>

                            <div class="col-md-5">
                                <label for="cd_cadastro_desc">Razão Social</label>
                                @Html.TextBoxFor(model => model.Clientes.RAZAO, new { @class = "form-control", disabled = "disabled" })
                            </div>

                            <div class="col-md-3">
                                <label for="des_cidade">Cidade</label>
                                @Html.TextBoxFor(model => model.Clientes.DES_CIDADE, new { @class = "form-control", disabled = "disabled" })
                            </div>
                            <div class="col-md-2">
                                <label for="CD_ESTADO">UF</label>
                                @Html.TextBoxFor(model => model.Clientes.CD_ESTADO, new { @class = "form-control", disabled = "disabled" })
                            </div>
                        </div>


                        <div class="form-group">

                            <div class="col-md-2">
                                <label for="CD_REGIONAL">Regional</label>
                                @Html.TextBoxFor(model => model.Clientes.CD_REGIONAL, new { @class = "form-control", disabled = "disabled" })
                            </div>

                            <div class="col-md-6">
                                <label for="RAZAO_REPRES">Representante</label>
                                @Html.TextBoxFor(model => model.Clientes.RAZAO_REPRES, new { @class = "form-control", disabled = "disabled" })
                            </div>
                        </div>


                        <div class="form-group">
                            <div class="col-md-2">
                                @Html.LabelFor(f => f.tp_procedimento.CD_TIPO)

                                <div class="input-group">
                                    @Html.TextBoxFor(model => model.CD_TIPO, new { @class = "form-control", disabled = "disabled" })
                                </div>
                            </div>

                            <div class="col-md-4">
                                <label for="cd_tipo_desc">Tipo do Procedimento</label>
                                @Html.TextBoxFor(model => model.tp_procedimento.DES_TIPO, new { @class = "form-control", disabled = "disabled" })
                            </div>
                        </div>




                        <div class="form-group">
                            <div class="col-md-2">
                                @Html.LabelFor(f => f.NF_FOX)

                                <div class="input-group">
                                    @Html.TextBoxFor(model => model.NF_FOX, new { @class = "form-control", disabled = "disabled" })
                                </div>
                            </div>

                            <div class="col-md-2">
                                <label for="cd_nf_desc">Faturamento</label>
                                @Html.TextBoxFor(model => model.DTA_NF_FOX, new { @class = "form-control", disabled = "disabled" })
                            </div>

                            <div class="col-md-2">
                                <label for="COD_OPERACAO">Operação</label>
                                @Html.TextBoxFor(model => model.COD_OPER, new { @class = "form-control", disabled = "disabled" })
                            </div>

                        </div>

                        <div class="form-group">
                            <div class="col-md-2">
                                Data de Entrega
                                <div class="input-group">
                                   
                                        <input type="text" class="form-control" disabled value="@( ViewBag.dta_entrega != null ? ViewBag.dta_entrega : "" )" />
                                   

                                </div>
                            </div>

                            <div class="col-md-2">
                                Data de Expedição
                                    <input type="text" class="form-control" disabled value="@( ViewBag.dta_expedicao != null ? ViewBag.dta_expedicao : "" )" />
                            </div>


                        </div>


                        <div class="form-group">
                            <div class="col-md-2">
                                @Html.LabelFor(f => f.CD_TRANSPORTADOR)
                                @Html.TextBoxFor(model => model.CD_TRANSPORTADOR, new { @class = "form-control", disabled = "disabled" })
                            </div>

                            <div class="col-md-5">
                                @Html.LabelFor(f => f.TRANSPORTADOR.RAZAO)
                                @Html.TextBoxFor(model => model.TRANSPORTADOR.RAZAO, new { @class = "form-control", disabled = "disabled" })
                            </div>



                        </div>

                        <div class="form-group">
                            <div class="col-md-4">
                                @Html.LabelFor(model => model.NF_CLIENTE)
                                @Html.TextBoxFor(model => model.NF_CLIENTE, new { @class = "form-control", disabled = "disabled" })

                            </div>
                        </div>



                        <div class="row">
                            <div class="col-md-4">
                                <div class="display-field">
                                    @Html.LabelFor(model => model.VL_TRANSPORTADORA)
                                    @Html.TextBoxFor(model => model.VL_TRANSPORTADORA, new { @class = "form-control", disabled = "disabled", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                    @Html.ValidationMessageFor(model => model.VL_TRANSPORTADORA)
                                </div>
                            </div>
                            <div class="col-md-4">
                                @Html.LabelFor(model => model.VL_REPRESENTANTE)
                                @Html.TextBoxFor(model => model.VL_REPRESENTANTE, new { @class = "form-control", disabled = "disabled", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                @Html.ValidationMessageFor(model => model.VL_REPRESENTANTE)
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-md-4">
                                <div class="display-field">
                                    @Html.LabelFor(model => model.VL_FOXLUX)
                                    @Html.TextBoxFor(model => model.VL_FOXLUX, new { @class = "form-control", disabled = "disabled", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                    @Html.ValidationMessageFor(model => model.VL_FOXLUX)
                                </div>
                            </div>
                            <div class="col-md-4">
                                @Html.LabelFor(model => model.VL_CLIENTE)
                                @Html.TextBoxFor(model => model.VL_CLIENTE, new { @class = "form-control", disabled = "disabled", @style = "border-color: #2e41dd; color: #2e41dd; font-weight: bold;" })
                                @Html.ValidationMessageFor(model => model.VL_CLIENTE)
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-md-4">
                                <div class="display-field">
                                    @Html.LabelFor(model => model.VL_DCLIENTE)
                                    @Html.TextBoxFor(model => model.VL_DCLIENTE, new { @class = "form-control", disabled = "disabled", @style = "border-color: #f00; color: #f00; font-weight: bold;" })
                                    @Html.ValidationMessageFor(model => model.VL_DCLIENTE)
                                </div>
                            </div>

                        </div>


                        <div class="form-group">
                            <div class="col-md-8">
                                @Html.LabelFor(model => model.OBS)
                                @Html.TextAreaFor(model => model.OBS, new { @class = "form-control", disabled = "disabled", @rows = "5" })
                                @Html.ValidationMessageFor(model => model.OBS)
                            </div>
                        </div>



                        <div class="form-group">
                            <div class="col-md-4">
                                <label for="ultimo_usuario">Última Interação</label>
                                <input id="ultimo_usuario" type="text" disabled class="form-control" value="@_usuario_aprovado" />
                            </div>
                            <div class="col-md-4">
                                <label for="ultimo_usuario">Situação Atual</label>
                                @Html.TextBoxFor(model => model.Situacao.DESCRICAO, new { @class = "form-control", disabled = "disabled" })

                            </div>


                        </div>




                    </div>
                </div>

            </div>
            <div class="panel-footer">
                <div class="btn-group">
                    <a class="btn btn-primary" href="@Url.Action("Edit", "ProcedimentoAdm", new { id = Model.CD_PROCEDIMENTO })"><i class="fa fa-pencil-square-o"></i>&nbsp;@Html.T("btbatender")</a>
                    <a class="btn btn-default" id="btbAbreJanela"><i class="fa fa-hdd-o"></i>&nbsp;Documentos</a>
                    <a class="btn btn-default" id="btbAbreInteracoes"><i class="fa fa-users"></i>&nbsp;Interações</a>
                    <a class="btn btn-default" href="@Url.Action("Pesquisa", "ProcedimentoAdm")"><i class="fa fa-caret-left"></i>&nbsp;Nova Pesquisa</a>

                </div>
            </div>

        </div>
    </div>


</div>



<script>
    $(document).ready(function () {
        $("#btbAbreJanela")
            .bind("click", function () {
                $("#wnddocShow").data("kendoWindow").center().open();
            });
    });

    $(document).ready(function () {
        $("#btbAbreInteracoes")
            .bind("click", function () {
                $("#wndIntShow").data("kendoWindow").center().open();
            });
    });


</script>

@(Html.Kendo().Window()
            .Name("wndIntShow")
            .Title("Interações")
            .Content("Carregando...")
            .Actions(actions => actions.Refresh().Close())
            .LoadContentFrom("Interacoes", "ProcedimentoAdm", new { cd_procedimento = @Model.CD_PROCEDIMENTO })
            .Width(1024)
            //.Height(480)
            .Modal(true)
            .Visible(false)
            .Scrollable(true)
            .Resizable()
            .Draggable(true)


)



@(Html.Kendo().Window()
                .Name("wnddocShow")
                .Title("Documentos Referenciados")
                .Content("Carregando...")
                .Actions(actions => actions.Refresh().Close())
                .LoadContentFrom("PesquisarDocumentos", "ProcedimentoAdm", new { cd_procedimento = @Model.CD_PROCEDIMENTO })
                .Width(680)
                .Height(480)
                .Modal(true)
                .Visible(false)
                .Scrollable(true)
                .Resizable()
                .Draggable(true)


)



<script>

    $(document).ready(function () {

        $('#frmEditProc').validate(
            {
                rules: {
                    ObsAtendimentoNovo: {
                        minlength: 2,
                        required: true

                    }
                },
                highlight: function (label) {
                    $(ObsAtendimentoNovo).closest('.control-group').addClass('error');

                },
                success: function (label) {
                    ObsAtendimentoNovo

                        .closest('.control-group').addClass('success');
                }
            });
    }); // end document.ready

</script>


